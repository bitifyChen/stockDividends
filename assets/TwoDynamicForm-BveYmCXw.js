import{E as L,e as g,d as T,r,o as l,f as s,w as p,i as R,c as m,j as h,F as v,k as M,b as q,l as z,t as F,n as y,m as u,q as A,a as S}from"./index-uwXGa9Rs.js";const G=(x,k,V="msg",o="确认",b="取消")=>new Promise((i,t)=>{L.confirm(x,k,{confirmButtonText:o,cancelButtonText:b,center:!0,customClass:V}).then(()=>i(!0)).catch(()=>t(!1))}),J={class:"show-unit"},K=["onClick"],Q={key:0,class:"submit col-span-12 flex pb-[20px]"},W=100,f={__name:"TwoDynamicForm",props:{fields:{type:Array,required:!0},parentForm:{type:Object,required:!0},rules:{type:Object,default:()=>{}},submitHide:{type:Boolean,default:!1},submitting:{type:Boolean,default:!1},submitAlert:{type:String,required:!1},submitText:{type:String,default:""},isHideAsterisk:{type:Boolean,default:!0}},emits:["submitFn"],setup(x,{expose:k,emit:V}){const o=x,b=V,i=g(null),t=T(()=>o.parentForm),d=g(0),w=g(!1),E=T(()=>d.value?d.value:"取得驗證碼"),N=(n=()=>{})=>{d.value===0&&!w.value&&(w.value=!0,n().then(()=>{d.value=W,w.value=!1;const c=setInterval(()=>{d.value===0?clearInterval(c):d.value--},1e3)}))},U=n=>{n&&n.validate(c=>{if(c)o.submitAlert?G(o.submitAlert,()=>b("submitFn")):b("submitFn");else return!1})};return k({resetFormMethod:()=>{i.value.resetFields()},validateFormMethod:()=>new Promise((n,c)=>{i.value.validate(_=>{_?n():c()})})}),(n,c)=>{const _=r("el-input"),B=r("el-option"),C=r("el-select"),O=r("el-radio"),$=r("el-radio-group"),D=r("el-switch"),H=r("TwoElDatePicker"),P=r("el-form-item"),j=r("el-button"),I=r("el-form");return l(),s(I,{ref_key:"ruleFormRef",ref:i,model:t.value,rules:o.rules,onSubmit:R(U,["prevent"]),class:"setting-base-form-use mx-[-10px] grid grid-cols-12 md:px-[20px] xl:px-[15px]","hide-required-asterisk":o.isHideAsterisk},{default:p(()=>[(l(!0),m(v,null,h(o.fields,e=>(l(),m("div",{key:e.name,class:y(["px-[10px] max-xl:!col-span-12",[e.col?`col-span-${e.col}`:"col-span-12"]])},[q(P,{label:e.label,prop:e.name,rules:e.rules,class:"setting-form-item flex flex-col items-start"},{default:p(()=>[e.type==="text"||e.type==="password"||e.type==="number"||e.type==="textarea"?(l(),s(_,{key:0,modelValue:t.value[e.name],"onUpdate:modelValue":a=>t.value[e.name]=a,type:e.type,placeholder:e.placeholder?e.placeholder:"","show-password":e.type==="password",class:y([[e.readonly?"is-readonly":""],"form-input-setting-unit-use h-[48px] flex-1"]),readonly:e.readonly},A({_:2},[e.unit?{name:"append",fn:p(()=>[S("div",J,F(e.unit),1)]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","type","placeholder","show-password","class","readonly"])):u("",!0),e.type==="select"&&!e.multiple?(l(),s(C,{key:1,modelValue:t.value[e.name],"onUpdate:modelValue":a=>t.value[e.name]=a,class:"flex-1",placeholder:e.placeholder?e.placeholder:""},{default:p(()=>[(l(!0),m(v,null,h(e.selectOption,a=>(l(),s(B,{label:a.label,value:a.value,key:a.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):u("",!0),e.type==="select"&&e.multiple?(l(),s(C,{key:2,modelValue:t.value[e.name],"onUpdate:modelValue":a=>t.value[e.name]=a,multiple:"","collapse-tags":!e.readonly,"collapse-tags-tooltip":!e.readonly,disabled:e.readonly,class:"flex-1",placeholder:e.placeholder?e.placeholder:""},{default:p(()=>[(l(!0),m(v,null,h(e.selectOption,a=>(l(),s(B,{label:a.label,value:a.value,key:a.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","collapse-tags","collapse-tags-tooltip","disabled","placeholder"])):u("",!0),e.type==="radio"?(l(),s($,{key:3,modelValue:t.value[e.name],"onUpdate:modelValue":a=>t.value[e.name]=a,disabled:e.readonly,class:"flex-1"},{default:p(()=>[(l(!0),m(v,null,h(e.selectOption,a=>(l(),s(O,{label:a.label,value:a.value,key:a.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):u("",!0),e.type==="switch"?(l(),s(D,{key:4,modelValue:t.value[e.name],"onUpdate:modelValue":a=>t.value[e.name]=a,disabled:e.readonly,class:"flex-1","inline-prompt":"","active-icon":n.Check,"inactive-icon":n.Close},null,8,["modelValue","onUpdate:modelValue","disabled","active-icon","inactive-icon"])):u("",!0),e.type==="countdown"?(l(),m(v,{key:5},[e.type==="countdown"?(l(),s(_,{key:0,modelValue:t.value[e.name],"onUpdate:modelValue":a=>t.value[e.name]=a,type:e.type,placeholder:e.placeholder?e.placeholder:"",class:y([[e.readonly?"is-readonly":""],"h-[48px] flex-1"]),readonly:e.readonly},A({_:2},[e.callback?{name:"append",fn:p(()=>[S("div",{class:y(["countdown-btn",{"is-disabled":d.value}]),onClick:a=>N(e.callback)},F(E.value),11,K)]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","type","placeholder","class","readonly"])):u("",!0)],64)):u("",!0),e.type==="date"?(l(),s(H,{key:6,modelValue:t.value[e.name],"onUpdate:modelValue":a=>t.value[e.name]=a,type:"date",class:"flex-1",placeholder:e.placeholder?e.placeholder:"",readonly:e.readonly},null,8,["modelValue","onUpdate:modelValue","placeholder","readonly"])):u("",!0),e.slot?(l(),m("div",{key:7,class:y(["flex-1",[e.slotClassName]])},[M(n.$slots,e.slot)],2)):u("",!0)]),_:2},1032,["label","prop","rules"])],2))),128)),M(n.$slots,"bottom"),o.submitHide?u("",!0):(l(),m("div",Q,[q(j,{color:"#2969FF",onClick:c[0]||(c[0]=e=>U(i.value)),class:y(["ml-auto mr-auto !h-[48px] w-auto !rounded-[7px] text-[16px]",o.submitText?"btn-submit":""]),loading:o.submitting},{default:p(()=>[z(F(o.submitText||"送出"),1)]),_:1},8,["class","loading"])]))]),_:3},8,["model","rules","hide-required-asterisk"])}}};export{f as _};
