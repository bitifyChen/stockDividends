import{r as ie,_ as Ce}from"./el-message-Bnacjm6q.js";import{e as V,n as w,t as k,j as z,T as ae,o as Se,k as Ie,p as ue,c as D,l as de,g as fe,q as p,w as L,s as q,P as we,b as Te,H as G,I as N,r as Oe,d as Be,u as Pe,B as De,f as Le,v as Ae,x as Re,y as le,a as ze,z as pe}from"./index-B5PB1ypI.js";import{g as ve,r as b,i as me,j as Ee,k as K,d as A,c,T as he,l as j,v as W,a as P,n as _e,p as $e,q as Ne,s as Ve,t as Fe,F as Y,m as Z,o as B,u as be,w as E,h as J,x as $,y as ye,E as Me,_ as qe,b as H,z as He,A as Ye,B as oe,C as Ke,D as je,e as Xe,G as Ue}from"./index-D18zpCDV.js";function Q(e){const t=ve();t&&V(t.proxy,e)}let Ge=2e3;const Ze=()=>++Ge,We={show:Boolean,zIndex:w,overlay:k,duration:w,teleport:[String,Object],lockScroll:k,lazyRender:k,beforeClose:Function,overlayStyle:Object,overlayClass:z,transitionAppear:Boolean,closeOnClickOverlay:k};function Je(e,t){return e>t?"horizontal":t>e?"vertical":""}function Qe(){const e=b(0),t=b(0),n=b(0),v=b(0),l=b(0),u=b(0),r=b(""),s=b(!0),i=()=>r.value==="vertical",a=()=>r.value==="horizontal",o=()=>{n.value=0,v.value=0,l.value=0,u.value=0,r.value="",s.value=!0};return{move:m=>{const _=m.touches[0];n.value=(_.clientX<0?0:_.clientX)-e.value,v.value=_.clientY-t.value,l.value=Math.abs(n.value),u.value=Math.abs(v.value);const f=10;(!r.value||l.value<f&&u.value<f)&&(r.value=Je(l.value,u.value)),s.value&&(l.value>ae||u.value>ae)&&(s.value=!1)},start:m=>{o(),e.value=m.touches[0].clientX,t.value=m.touches[0].clientY},reset:o,startX:e,startY:t,deltaX:n,deltaY:v,offsetX:l,offsetY:u,direction:r,isVertical:i,isHorizontal:a,isTap:s}}let R=0;const se="van-overflow-hidden";function et(e,t){const n=Qe(),v="01",l="10",u=o=>{n.move(o);const d=n.deltaY.value>0?l:v,h=Ie(o.target,e.value),{scrollHeight:m,offsetHeight:_,scrollTop:f}=h;let y="11";f===0?y=_>=m?"00":"01":f+_>=m&&(y="10"),y!=="11"&&n.isVertical()&&!(parseInt(y,2)&parseInt(d,2))&&ue(o)},r=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",u,{passive:!1}),R||document.body.classList.add(se),R++},s=()=>{R&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",u),R--,R||document.body.classList.remove(se))},i=()=>t()&&r(),a=()=>t()&&s();Se(i),me(a),Ee(a),K(t,o=>{o?r():s()})}function ee(e){const t=b(!1);return K(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const ce=()=>{var e;const{scopeId:t}=((e=ve())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[tt,nt]=D("overlay"),at={show:Boolean,zIndex:w,duration:w,className:z,lockScroll:k,lazyRender:k,customStyle:Object};var lt=A({name:tt,props:at,setup(e,{slots:t}){const n=b(),v=ee(()=>e.show||!e.lazyRender),l=r=>{e.lockScroll&&ue(r)},u=v(()=>{var r;const s=V(fe(e.zIndex),e.customStyle);return p(e.duration)&&(s.animationDuration=`${e.duration}s`),j(c("div",{ref:n,style:s,class:[nt(),e.className]},[(r=t.default)==null?void 0:r.call(t)]),[[W,e.show]])});return de("touchmove",l,{target:n}),()=>c(he,{name:"van-fade",appear:!0},{default:u})}});const ot=L(lt),st=V({},We,{round:Boolean,position:q("center"),closeIcon:q("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:q("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[ct,re]=D("popup");var rt=A({name:ct,inheritAttrs:!1,props:st,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:v}){let l,u;const r=b(),s=b(),i=ee(()=>e.show||!e.lazyRender),a=P(()=>{const g={zIndex:r.value};if(p(e.duration)){const T=e.position==="center"?"animationDuration":"transitionDuration";g[T]=`${e.duration}s`}return g}),o=()=>{l||(l=!0,r.value=e.zIndex!==void 0?+e.zIndex:Ze(),t("open"))},d=()=>{l&&Te(e.beforeClose,{done(){l=!1,t("close"),t("update:show",!1)}})},h=g=>{t("clickOverlay",g),e.closeOnClickOverlay&&d()},m=()=>{if(e.overlay)return c(ot,Z({show:e.show,class:e.overlayClass,zIndex:r.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},ce(),{onClick:h}),{default:v["overlay-content"]})},_=g=>{t("clickCloseIcon",g),d()},f=()=>{if(e.closeable)return c(N,{role:"button",tabindex:0,name:e.closeIcon,class:[re("close-icon",e.closeIconPosition),G],classPrefix:e.iconPrefix,onClick:_},null)};let y;const C=()=>{y&&clearTimeout(y),y=setTimeout(()=>{t("opened")})},S=()=>t("closed"),x=g=>t("keydown",g),X=i(()=>{var g;const{round:T,position:F,safeAreaInsetTop:U,safeAreaInsetBottom:xe}=e;return j(c("div",Z({ref:s,style:a.value,role:"dialog",tabindex:0,class:[re({round:T,[F]:F}),{"van-safe-area-top":U,"van-safe-area-bottom":xe}],onKeydown:x},n,ce()),[(g=v.default)==null?void 0:g.call(v),f()]),[[W,e.show]])}),ne=()=>{const{position:g,transition:T,transitionAppear:F}=e,U=g==="center"?"van-fade":`van-popup-slide-${g}`;return c(he,{name:T||U,appear:F,onAfterEnter:C,onAfterLeave:S},{default:X})};return K(()=>e.show,g=>{g&&!l&&(o(),n.tabindex===0&&_e(()=>{var T;(T=s.value)==null||T.focus()})),!g&&l&&(l=!1,t("close"))}),Q({popupRef:s}),et(s,()=>e.show&&e.lockScroll),de("popstate",()=>{e.closeOnPopstate&&(d(),u=!1)}),$e(()=>{e.show&&o()}),Ne(()=>{u&&(t("update:show",!0),u=!1)}),me(()=>{e.show&&e.teleport&&(d(),u=!0)}),Ve(we,()=>e.show),()=>e.teleport?c(Fe,{to:e.teleport},{default:()=>[m(),ne()]}):c(Y,null,[m(),ne()])}});const it=L(rt),[ut,O]=D("cell"),te={tag:q("div"),icon:String,size:String,title:w,value:w,label:w,center:Boolean,isLink:Boolean,border:k,iconPrefix:String,valueClass:z,labelClass:z,titleClass:z,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},dt=V({},te,Oe);var ft=A({name:ut,props:dt,setup(e,{slots:t}){const n=Be(),v=()=>{if(t.label||p(e.label))return c("div",{class:[O("label"),e.labelClass]},[t.label?t.label():e.label])},l=()=>{var i;if(t.title||p(e.title)){const a=(i=t.title)==null?void 0:i.call(t);return Array.isArray(a)&&a.length===0?void 0:c("div",{class:[O("title"),e.titleClass],style:e.titleStyle},[a||c("span",null,[e.title]),v()])}},u=()=>{const i=t.value||t.default;if(i||p(e.value))return c("div",{class:[O("value"),e.valueClass]},[i?i():c("span",null,[e.value])])},r=()=>{if(t.icon)return t.icon();if(e.icon)return c(N,{name:e.icon,class:O("left-icon"),classPrefix:e.iconPrefix},null)},s=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const i=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return c(N,{name:i,class:O("right-icon")},null)}};return()=>{var i;const{tag:a,size:o,center:d,border:h,isLink:m,required:_}=e,f=(i=e.clickable)!=null?i:m,y={center:d,required:!!_,clickable:f,borderless:!h};return o&&(y[o]=!!o),c(a,{class:O(y),role:f?"button":void 0,tabindex:f?0:void 0,onClick:n},{default:()=>{var C;return[r(),l(),u(),s(),(C=t.extra)==null?void 0:C.call(t)]}})}}});const vt=L(ft),[ge,mt]=D("collapse"),ke=Symbol(ge),ht={border:k,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var _t=A({name:ge,props:ht,emits:["change","update:modelValue"],setup(e,{emit:t,slots:n}){const{linkChildren:v,children:l}=Pe(ke),u=a=>{t("change",a),t("update:modelValue",a)},r=(a,o)=>{const{accordion:d,modelValue:h}=e;u(d?a===h?"":a:o?h.concat(a):h.filter(m=>m!==a))},s=(a={})=>{if(e.accordion)return;typeof a=="boolean"&&(a={expanded:a});const{expanded:o,skipDisabled:d}=a,m=l.filter(_=>_.disabled&&d?_.expanded.value:o??!_.expanded.value).map(_=>_.itemName.value);u(m)},i=a=>{const{accordion:o,modelValue:d}=e;return o?d===a:d.includes(a)};return Q({toggleAll:s}),v({toggle:r,isExpanded:i}),()=>{var a;return c("div",{class:[mt(),{[De]:e.border}]},[(a=n.default)==null?void 0:a.call(n)])}}});const bt=L(_t),[yt,M]=D("collapse-item"),gt=["icon","title","value","label","right-icon"],kt=V({},te,{name:w,isLink:k,disabled:Boolean,readonly:Boolean,lazyRender:k});var xt=A({name:yt,props:kt,setup(e,{slots:t}){const n=b(),v=b(),{parent:l,index:u}=Le(ke);if(!l)return;const r=P(()=>{var f;return(f=e.name)!=null?f:u.value}),s=P(()=>l.isExpanded(r.value)),i=b(s.value),a=ee(()=>i.value||!e.lazyRender),o=()=>{s.value?n.value&&(n.value.style.height=""):i.value=!1};K(s,(f,y)=>{if(y===null)return;f&&(i.value=!0),(f?_e:Re)(()=>{if(!v.value||!n.value)return;const{offsetHeight:S}=v.value;if(S){const x=`${S}px`;n.value.style.height=f?"0":x,Ae(()=>{n.value&&(n.value.style.height=f?x:"0")})}else o()})});const d=(f=!s.value)=>{l.toggle(r.value,f)},h=()=>{!e.disabled&&!e.readonly&&d()},m=()=>{const{border:f,disabled:y,readonly:C}=e,S=le(e,Object.keys(te));return C&&(S.isLink=!1),(y||C)&&(S.clickable=!1),c(vt,Z({role:"button",class:M("title",{disabled:y,expanded:s.value,borderless:!f}),"aria-expanded":String(s.value),onClick:h},S),le(t,gt))},_=a(()=>{var f;return j(c("div",{ref:n,class:M("wrapper"),onTransitionend:o},[c("div",{ref:v,class:M("content")},[(f=t.default)==null?void 0:f.call(t)])]),[[W,i.value]])});return Q({toggle:d,expanded:s,itemName:r}),()=>c("div",{class:[M({border:u.value&&e.border})]},[m(),_()])}});const Ct=L(xt),[St,I]=D("nav-bar"),It={title:String,fixed:Boolean,zIndex:w,border:k,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:k};var wt=A({name:St,props:It,emits:["clickLeft","clickRight"],setup(e,{emit:t,slots:n}){const v=b(),l=ze(v,I),u=o=>{e.leftDisabled||t("clickLeft",o)},r=o=>{e.rightDisabled||t("clickRight",o)},s=()=>n.left?n.left():[e.leftArrow&&c(N,{class:I("arrow"),name:"arrow-left"},null),e.leftText&&c("span",{class:I("text")},[e.leftText])],i=()=>n.right?n.right():c("span",{class:I("text")},[e.rightText]),a=()=>{const{title:o,fixed:d,border:h,zIndex:m}=e,_=fe(m),f=e.leftArrow||e.leftText||n.left,y=e.rightText||n.right;return c("div",{ref:v,style:_,class:[I({fixed:d}),{[pe]:h,"van-safe-area-top":e.safeAreaInsetTop}]},[c("div",{class:I("content")},[f&&c("div",{class:[I("left",{disabled:e.leftDisabled}),e.clickable&&!e.leftDisabled?G:""],onClick:u},[s()]),c("div",{class:[I("title"),"van-ellipsis"]},[n.title?n.title():o]),y&&c("div",{class:[I("right",{disabled:e.rightDisabled}),e.clickable&&!e.rightDisabled?G:""],onClick:r},[i()])])])};return()=>e.fixed&&e.placeholder?l(a):a()}});const Tt=L(wt),Ot=e=>ie("get","stock",null,e),Bt=e=>ie("post","stock",e),Pt={class:"my-[50px] px-[10px]"},Dt={__name:"stockAdd",emits:["finish"],setup(e,{expose:t,emit:n}){const v=n,l=b(!1),u=()=>l.value=!0,r=P(()=>[{name:"stockId",label:"股票代碼",type:"text",cssStyle:!0,rules:[{required:!0,message:"必填"}]},{name:"buyDate",label:"買入日期",type:"date",cssStyle:!0,rules:[{required:!0,message:"必填"}]},{name:"buyPrice",label:"買入價",type:"text",cssStyle:!0,rules:[{required:!0,message:"必填"}]},{name:"buyNum",label:"買入股數",type:"text",cssStyle:!0,rules:[{required:!0,message:"必填"}]}]),s=b({}),i=()=>{Bt(s.value).then(a=>{a.status===200&&(Me({message:"新增成功",type:"success",plain:!0}),l.value=!1,v("finish"))})};return t({open:u}),(a,o)=>{const d=Ce,h=it;return B(),be(h,{show:$(l),"onUpdate:show":o[0]||(o[0]=m=>ye(l)?l.value=m:null),position:"right",style:{width:"100%",height:"100%"},closeable:""},{default:E(()=>[J("div",Pt,[c(d,{fields:$(r),parentForm:$(s),submitText:"新增",onSubmitFn:i},null,8,["fields","parentForm"])])]),_:1},8,["show"])}}},Lt={},At={class:"w-full fixed top-0"},Rt=J("div",{class:"mb-[46px]"},null,-1);function zt(e,t){const n=Tt;return B(),H(Y,null,[J("div",At,[c(n,{title:"庫存"},{right:E(()=>[He(e.$slots,"default")]),_:3})]),Rt],64)}const pt=qe(Lt,[["render",zt]]),Et={class:"min-h-[100vh]"},$t={__name:"index",setup(e){const n=Ye(["token"]).get("token"),v=b(null),l=P(()=>v.value),u=P(()=>{const d=new Set;return l.value&&l.value.map(h=>{d.has(h.stockId)||d.add(h.stockId)}),d}),r=b(!1),s=()=>{r.value=!0,Ot({id:n}).then(d=>{d.status===200&&(v.value=d.data)}).finally(()=>{r.value=!1})},i=b("null"),a=b(null),o=()=>a.value&&a.value.open();return s(),(d,h)=>{const m=N,_=pt,f=Ct,y=bt,C=Dt,S=Ke;return B(),H(Y,null,[c(_,null,{default:E(()=>[c(m,{name:"plus",size:"28",onClick:o})]),_:1}),j((B(),H("div",Et,[c(y,{modelValue:$(i),"onUpdate:modelValue":h[0]||(h[0]=x=>ye(i)?i.value=x:null),accordion:""},{default:E(()=>[(B(!0),H(Y,null,je(u.value,x=>(B(),be(f,{title:x,name:x,key:x},{default:E(()=>[Xe(Ue(l.value.filter(X=>X.stockId===x)),1)]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])])),[[S,$(r)]]),c(C,{ref_key:"stockAddHook",ref:a,onFinish:s},null,512)],64)}}};typeof oe=="function"&&oe($t);export{$t as default};
