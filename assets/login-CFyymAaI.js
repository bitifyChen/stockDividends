import{g as x}from"./user-oT4FP4Xi.js";import{_ as y}from"./el-message-Mc3_iznV.js";import{_ as h,S as k,R as v,L as b,a as S,r as c,h as I,o as w,b as U,c as l,y as a,f as r,w as F,M as i,E as o,e as V,U as B,V as C}from"./index-fYJhQfop.js";const E=s=>(B("data-v-26e80a85"),s=s(),C(),s),M={class:"p-[20px] w-full"},N=E(()=>r("div",{class:"font-black text-[48px] text-[var(--main-primary-color)]"},[r("div",{class:"text-center"},"Stock!")],-1)),q={class:"flex justify-end"},u={__name:"login",setup(s){const p=k(),m=v(),d=b(["token"]),f=S(()=>[{name:"username",label:"帳號",type:"text",cssStyle:!0,rules:[{required:!0,message:"帐号为必填项"}]},{name:"password",label:"密碼",type:"password",cssStyle:!0,rules:[{required:!0,message:"密码为必填项"}]}]),n=c({}),t=c(!1),_=()=>{t.value=!0,x(n.value).then(e=>{e.status===200?(o({message:"登入成功",type:"success",plain:!0}),p.setUserInfo(e.data),d.set("token",e.data.token),m.push({name:"IndexPage"})):o({message:"帳號或密碼錯誤",type:"error",plain:!0})}).catch(e=>{o({message:"網路問題，請稍後再試",type:"error",plain:!0})}).finally(()=>{t.value=!1})};return(e,R)=>{const g=I("router-link");return w(),U("div",M,[N,l(y,{submitting:a(t),fields:a(f),parentForm:a(n),submitText:"登入",onSubmitFn:_,class:"form"},null,8,["submitting","fields","parentForm"]),r("div",q,[l(g,{to:"/register",class:"text-[var(--main-primary-color)]"},{default:F(()=>[V("沒有帳號嗎，前往註冊")]),_:1})])])}}};typeof i=="function"&&i(u);const P=h(u,[["__scopeId","data-v-26e80a85"]]);export{P as default};
